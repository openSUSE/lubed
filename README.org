#+TITLE: lubed - List Updates in BundlEd Dependencies

Small utility to track the dependencies of the [[https://build.opensuse.org/project/show/systemsmanagement:saltstack:bundle][Salt Bundle]].


* Installation
**  With =pip=
#+begin_src shell
VERSION=
python3 -m venv .venv
. .venv/bin/activate
pip install https://github.com/openSUSE/lubed/releases/download/v$VERSION/lubed-$VERSION-py3-none-any.whl
lubed --help
#+end_src

** With =uv= (development)
#+begin_src shell
zypper install python3-uv
git clone git@github.com:openSUSE/lubed
cd lubed
uv venv
uv sync --dev
uv run lubed --help
#+end_src

* Configuration
~lubed~ needs to know where to find the origin of the dependencies.

=config.toml= must include an =origins= table of tables, e.g.
#+begin_src toml
[origins]
[origins.saltbundlepy]
project = "SUSE:SLE-15-SP4:Update"
package = "python310"
#+end_src

Keep in mind that the /name/ is the /OBS Package/ name, and that the OBS API resolves project
inheritance.

* Running ~lubed~
- ~lubed init~ -> saves the current time in =.last_execution=
- ~lubed updates~ -> list packages that have been updated in their origin since
  the timestamp in =.last_execution=.
- ~lubed subprojects-containing saltbundlepy~ -> list all subprojects that
  contain =saltbundlepy=
- ~lubed not-in-conf~ -> list packages in the bundle project that are not in the
  =origins= table in =config.toml=.
- ~lubed create-issue~ -> create a GitHub issue with the list of all packages
  that need an update
